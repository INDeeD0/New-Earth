<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Research Progress Tree</title>
<style>
body {
  font-family: Arial, sans-serif;
  background-color: #222;
  color: #fff;
  text-align: center;
  margin: 0;
  padding: 0;
}
.container {
  display: grid;
  grid-template-columns: repeat(6, 130px);
  grid-template-rows: repeat(12, 15px);
  gap: 5px 20px;
  justify-content: center;
  margin: 20px auto;
  position: relative;
}
.section {
  background-color: #000;
  border: 1px solid #666;
  color: #fff;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 11px;
  border-radius: 6px;
  cursor: pointer;
  position: relative;
  z-index: 1;
}
.section:hover { border-color: #ffcc00; }
svg#lines {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 0;
}
</style>
</head>
<body>


<div class="container" id="mapContainer">
  <!-- Root -->
  <div class="section root" style="grid-row:1 / span 11; grid-column:1;">Headquarters</div>

  <!-- Column 2 -->
  <div class="section" style="grid-row:1; grid-column:2;">Bunker</div>
  <div class="section" style="grid-row:2 / span 3; grid-column:2;">Black Market</div>
  <div class="section" style="grid-row:5; grid-column:2;">Geoponic Farm</div>
  <div class="section" style="grid-row:6 / span 2; grid-column:2;">Oil Rig</div>
  <div class="section" style="grid-row:8 / span 2; grid-column:2;">Alloy Refinery</div>
  <div class="section" style="grid-row:10; grid-column:2;">Supply Depot</div>
  <div class="section" style="grid-row:11; grid-column:2;">Situation Room</div>
  <div class="section" style="grid-row:12; grid-column:2;">Outpost Harvest</div>
  <div class="section" style="grid-row:12; grid-column:1;">Outpost Strategic</div>

  <!-- Column 3 -->
  <div class="section" style="grid-row:2 / span 3; grid-column:3;">Engineering</div>
  <div class="section" style="grid-row:5; grid-column:3;">Barracks</div>
  <div class="section" style="grid-row:6 / span 2; grid-column:3;">Research Lab</div>
  <div class="section" style="grid-row:8 / span 2; grid-column:3;">Wall</div>
  <div class="section" style="grid-row:10; grid-column:3;">Global Network</div>

  <!-- Column 4 -->
  <div class="section" style="grid-row:2; grid-column:4;">Experimentation Chamber</div>
  <div class="section" style="grid-row:3; grid-column:4;">Factory</div>
  <div class="section" style="grid-row:4; grid-column:4;">Turret</div>
  <div class="section" style="grid-row:5; grid-column:4;">Medical Bay</div>
  <div class="section" style="grid-row:6; grid-column:4;">Hostile Containment</div>
  <div class="section" style="grid-row:7; grid-column:4;">Shard Reactor</div>
  <div class="section" style="grid-row:8; grid-column:4;">Airstrip</div>
  <div class="section" style="grid-row:9; grid-column:4;">Satellite Uplink</div>
  <div class="section" style="grid-row:10; grid-column:4;">Security Station</div>

  <!-- Column 5 -->
  <div class="section" style="grid-row:3; grid-column:5;">Robotics Bay</div>
  <div class="section" style="grid-row:5; grid-column:5;">Command Post</div>
  <div class="section" style="grid-row:6; grid-column:5;">Alien Genetics Labs</div>

  <!-- Column 6 -->
  <div class="section" style="grid-row:5; grid-column:6;">Hero Armory</div>

  <svg id="lines"></svg>
</div>

<script>
function drawLines() {
  const svg = document.getElementById('lines');
  svg.innerHTML = '';
  const container = document.getElementById('mapContainer');

  const treeMap = {
    "Headquarters": ["Bunker","Black Market","Geoponic Farm","Oil Rig","Alloy Refinery","Supply Depot","Situation Room"],
    "Bunker": [],
    "Black Market": ["Engineering"],
    "Engineering": ["Experimentation Chamber","Factory","Turret"],
    "Factory": ["Robotics Bay"],
    "Geoponic Farm": ["Barracks"],
    "Oil Rig": ["Research Lab"],
    "Alloy Refinery": ["Wall"],
    "Barracks": ["Medical Bay"],
    "Research Lab": ["Hostile Containment","Shard Reactor"],
    "Experimentation Chamber": [],
    "Turret": [],
    "Medical Bay": ["Command Post"],
    "Hostile Containment": ["Alien Genetics Labs"],
    "Shard Reactor": [],
    "Airstrip": [],
    "Satellite Uplink": [],
    "Security Station": [],
    "Wall": ["Airstrip","Satellite Uplink"],
    "Command Post": ["Hero Armory"],
    "Robotics Bay": [],
    "Alien Genetics Labs": [],
    "Hero Armory": [],
    "Supply Depot": ["Global Network"],
    "Global Network": ["Security Station"] 
    };

  const elems = Array.from(container.children)
                     .filter(el => el.classList.contains('section'))
                     .reduce((acc, el) => { acc[el.innerText.trim()] = el; return acc; }, {});

  for (let parentName in treeMap) {
    const children = treeMap[parentName];
    if (!children.length) continue;

    const parentEl = elems[parentName];
    if (!parentEl) continue;
    const parentRect = parentEl.getBoundingClientRect();
    const containerRect = container.getBoundingClientRect();

    // Right edge of parent div
    const startX = parentRect.right - containerRect.left;
    const startY = parentRect.top - containerRect.top + parentRect.height / 2;

    children.forEach(childName => {
      const childEl = elems[childName];
      if (!childEl) return;
      const childRect = childEl.getBoundingClientRect();

      // Left edge of child div
      const endX = childRect.left - containerRect.left;
      const endY = childRect.top - containerRect.top + childRect.height / 2;

      const midX = startX + (endX - startX)/2;

      const polyline = document.createElementNS("http://www.w3.org/2000/svg","polyline");
      polyline.setAttribute('points', `${startX},${startY} ${midX},${startY} ${midX},${endY} ${endX},${endY}`);
      polyline.setAttribute('stroke','#ffcc00');
      polyline.setAttribute('stroke-width','2');
      polyline.setAttribute('fill','none');
      polyline.setAttribute('stroke-linecap','round');
      polyline.setAttribute('stroke-linejoin','round');
      svg.appendChild(polyline);
    });
  }
}

window.onload = drawLines;
window.onresize = drawLines;
</script>






</body>
</html>
