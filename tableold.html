<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #222;
    color: #fff;
    text-align: center;
    margin: 0;
    padding: 0;
  }
  .container {
    display: grid;
    grid-template-columns: repeat(6, 130px);
    grid-template-rows: repeat(11, 15px);
    gap: 5px 20px;
    justify-content: center;
    margin: 20px auto;
    position: relative;
  }
  .section {
    background-color: #000;
    border: 1px solid #666;
    color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 11px;
    border-radius: 6px;
    cursor: pointer;
    position: relative;
    z-index: 1; /* above lines */
  }
  .section:hover {
    border-color: #ffcc00;
  }
  svg#lines {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 0; /* behind sections */
  }
</style>
</head>
<body>

<div class="container" id="mapContainer">
  <!-- Root spanning full height -->
  <div class="section root" id="root" style="grid-row: 1 / span 11; grid-column: 1;">Headquarters</div>

  <!-- Column 2 -->
  <div class="section" style="grid-row:1; grid-column:2;">Bunker</div>
  <div class="section" style="grid-row:2 / span 3; grid-column:2;">Black Market</div>
  <div class="section" style="grid-row:5; grid-column:2;">Geoponic Farm</div>
  <div class="section" style="grid-row:6 / span 2; grid-column:2;">Oil Rig</div>
  <div class="section" style="grid-row:8 / span 2; grid-column:2;">Alloy Refinery</div>
  <div class="section" style="grid-row:10; grid-column:2;">Supply Depot</div>
  <div class="section" style="grid-row:11; grid-column:2;">Situation Room</div>

  <!-- Column 3 -->
  <div class="section" style="grid-row:2 / span 3; grid-column:3;">Engineering</div>
  <div class="section" style="grid-row:5; grid-column:3;">Barracks</div>
  <div class="section" style="grid-row:6 / span 2; grid-column:3;">Research Lab</div>
  <div class="section" style="grid-row:8 / span 2; grid-column:3;">Wall</div>
  <div class="section" style="grid-row:10; grid-column:3;">Global Network</div>

  <!-- Column 4 -->
  <div class="section" style="grid-row:2; grid-column:4;">Experimentation Chamber</div>
  <div class="section" style="grid-row:3; grid-column:4;">Factory</div>
  <div class="section" style="grid-row:4; grid-column:4;">Turret</div>
  <div class="section" style="grid-row:5; grid-column:4;">Medical Bay</div>
  <div class="section" style="grid-row:6; grid-column:4;">Hostile Containment</div>
  <div class="section" style="grid-row:7; grid-column:4;">Shard Reactor</div>
  <div class="section" style="grid-row:8; grid-column:4;">Airstrip</div>
  <div class="section" style="grid-row:9; grid-column:4;">Satellite Uplink</div>
  <div class="section" style="grid-row:10; grid-column:4;">Security Station</div>

  <!-- Column 5 -->
  <div class="section" style="grid-row:3; grid-column:5;">Robotics Bay</div>
  <div class="section" style="grid-row:5; grid-column:5;">Command Post</div>
  <div class="section" style="grid-row:6; grid-column:5;">Alien Genetics Labs</div>

  <!-- Column 6 -->
  <div class="section" style="grid-row:5; grid-column:6;">Hero Armory</div>

  <!-- SVG for lines -->
  <svg id="lines"></svg>
</div>

<script>
function drawLines() {
  const svg = document.getElementById('lines');
  svg.innerHTML = '';
  const container = document.getElementById('mapContainer');

  for (let col = 1; col < 6; col++) { // from column 1->2, 2->3, etc
    const fromCol = Array.from(container.children).filter(d => {
      const style = d.style.gridColumn;
      return style.includes(col);
    });

    const toCol = Array.from(container.children).filter(d => {
      const style = d.style.gridColumn;
      return style.includes(col + 1);
    });

    fromCol.forEach(f => {
      const fRect = f.getBoundingClientRect();
      const fRight = fRect.right - container.getBoundingClientRect().left;
      const fCenterY = fRect.top + fRect.height / 2 - container.getBoundingClientRect().top;

      toCol.forEach(t => {
        const tRect = t.getBoundingClientRect();
        const tLeft = tRect.left - container.getBoundingClientRect().left;
        const tCenterY = tRect.top + tRect.height / 2 - container.getBoundingClientRect().top;

        // Only one line per vertical overlap
        if(fRect.bottom > tRect.top && fRect.top < tRect.bottom){
          // Draw L-shaped path: horizontal then vertical
          const path = document.createElementNS("http://www.w3.org/2000/svg",'path');
          const midX = (fRight + tLeft)/2;
          const d = `M ${fRight} ${fCenterY} H ${midX} V ${tCenterY} H ${tLeft}`;
          path.setAttribute('d', d);
          path.setAttribute('stroke','#ffcc00');
          path.setAttribute('stroke-width','2');
          path.setAttribute('fill','none');
          path.setAttribute('stroke-linecap','round');
          path.setAttribute('stroke-linejoin','round');
          svg.appendChild(path);
        }
      });
    });
  }
}

window.onload = drawLines;
window.onresize = drawLines;
</script>

</body>
</html>
